{% load i18n %}
{% load txcommontags %}
{% load permissions %}


<div id="resources" class="resources separate">

  {% if request.user.is_authenticated %}
    {% load upload_manager_tags %}
    {% upload_manager project %}
  {% endif %}

<!--  <div class="editlinks">
  <p>
    <a class="simlink rss_feed" href="{% url project_feed param=project.slug %}" title="Project feed">
      <span>Subscribe to this feed</span>&nbsp;<img border="0" src="{{ MEDIA_URL }}images/icons/feed.png" />
    </a>
  </p>
  {% if perms.projects.add_component or is_maintainer %}
    <p style="text-align: right;"><a class="i16 add buttonized" href="{% url component_create project_slug=project.slug %}">{% trans "Add" %}</a></p>
  {% endif %}
  </div>-->

  {% with project.resource_set.all as resources %}
  <h3>{% blocktrans count resources|length as counter %}Project Resource{% plural %}Project Resources{% endblocktrans %}
    {% render_metacount resources _("resources") %}
  </h3>

  {% if resources %}

    <script type="text/javascript">
    	$(document).ready(function(){
    		$(".res_tipsy_enable").tipsy({'html':true, 'gravity':'s'});
    	});
    </script>

  <table style="clear:both;margin-top:0.5em;width:100%"> 
   <tr>
    <th style="color:#666666;font-size:0.85em;font-weight:normal">Resource Name</th>
    <th style="color:#666666;font-size:0.85em;font-weight:normal">Languages</th>
    <th style="color:#666666;font-size:0.85em;font-weight:normal">Last Updated</th>
   </tr>
  {% for res in resources %}
    <tr>
        <td class="res_tipsy_enable" style="padding-left:1.5em;background:url({{ STATIC_URL }}images/icons/page_white_stack.png) no-repeat left center" title="Total Strings: {{ res.total_entities }}<br/>Available Languages: {{ res.available_languages|length }}">
        <a href="{{ res.get_absolute_url }}" style="font-weight:bold">{{ res.name }}</a>
        <sup class="entry_metalink">
           {% if request.user.is_authenticated and is_maintainer %}
             <a href="{% url resource_edit project_slug=project.slug resource_slug=res.slug %}">{% trans "edit" %}</a>
             , <a href="{% url resource_delete project_slug=project.slug resource_slug=res.slug %}">{% trans "del" %}</a>
           {% endif %}
        </sup>
        </td>
        <td class="more_table">
        {% for language in res.available_languages %}
            <span>{{ language }}</span>
        {% endfor %}
        </td>
        <td class="last_updated">
        </td>
    </tr>
  {% endfor %}
  </table>
  {% else %}

  <p>{% trans "No resources are registered for this project yet." %}</p>
    {% endif %}
  {% endwith %}
  <p class="i16 tip compact clear">
    {% blocktrans %}A <em>Resource</em> is mapped to master file and it's translated versions.
    For example Resource could be bound to nano.pot and de.po, it.po, fi.po, etc.{% endblocktrans %}
  </p>
</div>
