{% extends "projects/base.html" %}
{% load i18n %}
{% load txcommontags %}

{% block extra_head %}
  <script type="text/javascript" src="{{ MEDIA_URL }}js/tablesorted.js"></script>
  <script type="text/javascript" src="{{ MEDIA_URL }}js/jquery.qtip-1.0.0-rc2.min.js"></script>
  <link media="screen" href="{{ MEDIA_URL }}css/tablesorter.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript">
  $(document).ready(function() { 
      $(".tablesorter").tablesorter(); 
  }); 
  </script>

{% endblock %}

{% block title %}
{% with pofile.object as component %}
{{ block.super }}
| {{ component.project.name }}
| {% blocktrans with component.name as component_name %}{{ component_name }}{% endblocktrans %}
| {% blocktrans with pofile.filename as filename %}Reviews for '{{ filename }}'{% endblocktrans %}
{% endwith %}
{% endblock %}

{% block breadcrumb %}
{% with pofile.object as component %}
{{ block.super }}
&raquo; <a href="{{ component.project.get_absolute_url }}">{{ component.project.name }}</a>
&raquo; <a href="{{ component.get_absolute_url }}">{{ component.name }}</a>
&raquo; {% blocktrans with pofile.filename as filename %}Reviews for '<code>{{ filename }}</code>'{% endblocktrans %}
{% endwith %}
{% endblock %}

{% block content_title %}
<h2 class="pagetitle">{% blocktrans with component.name as component_name and pofile.filename as filename %}Reviews for '<code>{{ filename }}</code>'{% endblocktrans %}</h2>
{% endblock %}

{% block content %}
  <h2>{% trans "Open Reviews" %}</h2>

{% if reviews %}
<table class="tablesorter">
  <thead>
    <tr>
      <th>{% trans "Review ID" %}</th>
      <th>{% trans "Requester" %}</th>
      <th>{% trans "File" %}</th>
      <th>{% trans "When" %}</th>
    </tr>
  </thead>
  <tbody>
{% for review in reviews %}
    <tr>
      <td>{{ review.id }}</td>
      <td>{{ review.author }}</td>
      <td><a href="#FIXME">#FIXME</a></td>
      <td>{{ review.created_on|timesince }} ago</td>
    </tr>
{% endfor %}
</table>
{% else %}
<p>{% trans "No open reviews!" %}</p>
{% endif %}

<h2 class="i16 add">{% trans "Request a new translation review" %}</h2>

<p class="i16 tip compact clear">
  Use the following form to upload a file and request a review
  from another translator. He may login and review your work and provide
  any feedback needed, or simply submit your file to the upstream project.
</p>

<div class="generic_form">
  <form action='' method='post'>
  <table>
  <tbody>
    {% form_as_table_rows form %}
  </tbody>
  </table>
  <p class="submit"><input type="submit" class="i16 submit" value="{% trans "Request Review" %}" /></p>
</div>

{% endblock %}
