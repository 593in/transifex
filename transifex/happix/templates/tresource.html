{% extends "base.html" %}
{% load i18n %}

{% block breadcrumb %}

{{block.super}} »
<a href="{% url project_list_recent %}">{% trans "Projects" %}</a> » 
<a href="{% url project_detail project.slug %}">{{project}}</a> »
<a href="{% url project.resource project.slug tresource.slug %}">{{tresource}}</a>
{% endblock %}

{% block title %}
{{ block.super }} |
Projects |
{{project}}
{{tresource}}
{% endblock %}

{% block body_class %}project_list{% endblock %}

{% block content_title %}


{% endblock %}

{% block content %}

<script type="text/javascript">
	var clone_url = "{% url project.resource project.slug tresource.slug %}";
	$(document).ready(function(){
		$(".tipsy_enable").tipsy({'html':true, 'gravity':'s'});
		$(".extract").click(function() {
		
			var target_lang_code = $(this).parent().prev().children().val();
			var source_lang_code = $(this).parent().prev().children().attr('name');
			if ( target_lang_code != "" ) {
				request_url = clone_url+source_lang_code+"/clone/"+target_lang_code;
				$.ajax({ url: request_url, success: function(){
					window.location.reload();
				}});
			} else {
				alert("Please select a target language first and then click clone");
			}
					
		});
		$(".languages").hover(
			function() {
				$(this).children().next().show()
			},
			function() {
				$(this).children().next().hide();
			}	
		);
	});
</script>

{% if request.user.is_authenicated %}
{% load upload_manager_tags %}
{% upload_manager tresource %}
{% endif %}


<table>
Available translations:
<tbody id='translated_tablebody'>
{% for language,count in translated_languages.items %}
    <tr class="languages">
		<td style="padding-right:4em;" ><a href="{% url translation project.slug tresource.slug language.code %}">{{language}}</a><sup>{{count}}</sup></td>
		<td style="display:none"><select name="{{ language.code }}" class="language">
			<option value="">Select Language</option>
			{% for lang in languages %}
				<option value="{{ lang.code }}">{{ lang.name }}</option>
			{% endfor %}
			</select>
		<span class="i16 branch buttonized_simple tipsy_enable extract" title="Extract strings from translation and place them into new translation resource">Clone</span>
		<span class="i16 delete buttonized_simple tipsy_enable" title="Delete uploaded file">Delete</span></td>	
	</tr>	
{% endfor %}
</tbody>
</table>


<a href="" class="i16 buttonized add">Start New Translation</a>

{% endblock %}

{% block content_footer %}
{% endblock %}
