{% load i18n %}
{% load statistics_happix %}
{% load truncate %}
{% load permissions %}
{% load team_tags %}

<div class="actions_popup">
  <div class="first_level title_wrapper">
    <span class="breadcrumb" >
      <a href="{% url project_detail project.slug %}">{{project.name|truncate_chars_middle:"40"}}</a> »
      <a href="{% url project.resource project.slug resource.slug %}">{{resource.name|truncate_chars_middle:"40"}}</a> »
      {{ target_language }}
    </span>
    <span class="favourite_wrapper">
      <img class="tipsy_enable" src="{{ STATIC_URL }}images/icons/heart.png" title="Favourite Resource Language" />
    </span>
    <div class="details_font">
        {% blocktrans with resource.total_entities as total_entities %} Total:&nbsp;{{ total_entities }} strings{% endblocktrans %}
    </div>
  </div>
  <div class="first_level">
    <span class="translate_button_wrapper">
      <a class="i16 tick buttonized2" id="translate_now" href="{% url translation project.slug resource.slug target_language.code %}">{% trans "Translate Now" %}</a>
    </span>
    <div class="stats_wrapper">
      {% with 300 as barwidth %}
      <div class="stats tipsy_enable" style='width:{{ barwidth|add:"60" }}px;' title="{% trans "Translated: " %}{% translated resource target_language.code %}<br />{% trans "Untranslated: " %}{% untranslated resource target_language.code %}">
          <div class="stats_string_resource_actions" >
              {% trans_percent resource target_language.code %}% 
          </div> 
          {% stats_bar_actions resource target_language.code barwidth %}
      </div>
      {% endwith %}
      <div class="details_font stats_details_string">
      {% blocktrans with resource.total_entities as total_entities %} {{ total_entities }} strings,{% endblocktrans %} 
      {% untranslated resource target_language.code %} {% trans "remaining strings" %}
      </div>
    </div>
  </div>
  <div class="first_level more_actions">
        <ul class="right">
          <li class="top">
            <span class="i16 connect"><a href="{% url translation project.slug resource.slug target_language.code %}">{% trans "Translate online" %}</a></span
          </li>
          {% if target_language.code|language_has_team:project %}
          <li>
            <span class="i16 team"><a href="{% url team_detail project.slug target_language.code %}">{% trans "Visit language team" %}</a></span>
          </li>
          {% endif %}
          <li>
            <span class="i16 clone disabled">{% trans "Clone to new language" %}</span>
            <span class="tipsy_enable" title="Available soon :)">(?)</span>
          </li>
        </ul>
        <ul>
          <li class="top">
            <span class="i16 get_file disabled">{% trans "Download for viewing" %}</span>
            <span class="tipsy_enable" title="Available soon :)">(?)</span>
          </li>
          <li>
            <span class="i16 lock disabled">{% trans "Download for translation" %}</span> 
            <span class="tipsy_enable" title="Available soon :)">(?)</span>
          </li>
          <li>
            <span class="i16 submit_file disabled">{% trans "Upload new version" %}</span>
            <span class="tipsy_enable" title="Available soon :)">(?)</span>
          </li>
        </ul>
  </div>
  <div class="first_level last_update">
        <ul>
          <li class="top">
            <span class="i16 lock_none">{% trans "Resource is not locked by anyone." %} </span>
          </li>
          <li>
            <span class="i16 clock">{% trans "Translation last updated by" %} <strong>{% last_committer resource target_language.code %}</strong> ({% last_translation_update resource target_language.code %})</span>
          </li>
        </ul>
  </div>
  {% get_permission "project_perm.maintain" for request.user and resource.project as "is_maintainer" %}
  {% if perms.projects.delete_resource or is_maintainer %}
  <div class="first_level footer_action">
    <a class="i16 delete">{% trans "Delete translations" %}</a>
  <div>
  {% endif %}
</div>
