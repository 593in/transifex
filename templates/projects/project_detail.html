{% extends "projects/base.html" %}
{% load i18n %}
{% load markup %}
{% load projects_tags %}
{% load statistics %}

{% block body_class %}{{ block.super }} project_detail{% endblock %}

{% block title %}{{ block.super }} | {{ project.name }}{% endblock %}

{% block breadcrumb %}{{ block.super }} &raquo; {{ project.name }}{% endblock %}

{% block body_sec %}
  {% include "search_form_plain.html" %}
{% endblock %}

{% block body_main %}

  <h2 class="name">{{ project.name }}</h2>

  {% if project.description %}<p class="description">{{ project.description }}</p>{% endif %}

  <div class="long_description">{{ project.long_description|markdown|truncatewords:"100" }}
  {% comment %}
  {# FIXME: This is sub-optimal #}
  {% ifequal project.long_description|markdown project.long_description|markdown|truncatewords:"100" %}
  (<a href="?long_desc">more</a>)
  {% endifequal %}
  {% endcomment %}
  </div>

  <div class="details">

  <div class="editlinks"><p class="i16 edit"><a href="{% url project_edit slug=project.slug %}">{% trans "Edit" %}</a></p></div>

  <h3>{% trans "Project details" %} </h3>
  <table class="definition">{% if project.homepage %}
    <tr>
      <th class="homepage i16">{% trans "Homepage:" %}</th>
      <td><a title="{% blocktrans with project.name as project_name %}Homepage for {{ project_name }}{% endblocktrans %}" href="{{ project.homepage }}">{{ project.homepage }}</a></td>
    </tr>
    {% endif %}{% if project.repository %}
    <tr>
      <th class="repository i16">{% trans "Source:" %}</th>
      <td>
        <code>{{ project.repository }}</code>
        {% if project.repository_web %}<sup>(<a title="{% trans "Link to a web front-end to the source" %}" href="{{ project.repository_web }}">{% trans "web" %}</a>)</sup>{% endif %}
        <img class="repotype" src="{{MEDIA_URL}}/images/icons/vcs/{{ project.repository_type }}.png" alt="{{ project.repository_type }}" title="{{ project.repository_type }}" />
      </td>
    </tr>
    {% endif %}{% if project.branches %}
    <tr>
      <th class="branch i16">{% trans "Branches:" %}</th>
      <td>
        {{ project.branches }}
      </td>
    </tr>
    {% endif %}<tr>
      <th class="i16 tag">{% trans "Tags:" %}</th>
      <td>{% for tag in project.get_tags %}
        <a href="/projects/tag/{{tag}}" alt="{% blocktrans %}Projects with tag {{tag}}{% endblocktrans %}" title="{% blocktrans %}Projects with tag {{tag}}{% endblocktrans %}">{{tag}}</a> {%endfor%}
      </td>
    </tr>
    <tr>
      <th class="i16 link">{% trans "External resources:" %}</th>
      <td><ul>
        <li>{% trans "Screenshots" %}</li>
        <li>...</li>
        </ul>
      </td>
    </tr>
  </table>
</div>

<h3>{% trans "Project statistics" %} </h3>
{% project_stats_table project %}


{% include "projects/component_list.html" %}

{% endblock %}

{% block content_footer %}
  <div id="content_footer_center">
    <div class="deletelink">
      <span class="i16 delete"><a href="{% url project_delete slug=project.slug %}">{% trans "Delete project" %}</a></span>
    </div>
  </div>
{% endblock %}
