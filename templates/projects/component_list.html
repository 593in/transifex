{% load i18n %}
{% load tx-common %}

<div id="components" class="components">

  {% if request.user.is_authenticated %}
  <div class="editlinks"><span class="i16 add">
    <a href="{% url component_create project_slug=project.slug %}">{% trans "Add" %}</a></span>
  </p></div>
  {% endif %}

  {% with project.component_set.all as components %}
  <h3>{% blocktrans count components|length as counter %}Project Component{% plural %}Project Components{% endblocktrans %}
    {% render_metacount components _("components") %}
  </h3>

  {% if components %}
  <div class="component_list">
  {% for comp in components|slice:"0:4" %}
    <div class="entry">
      <p class="name"><a href="{{ comp.get_absolute_url }}">{{ comp.name }}</a>
      {% if request.user.is_authenticated %}
      <sup class="entry_metalink">
        (<a href="{% url component_edit project_slug=project.slug component_slug=comp.slug %}">{% trans "edit" %}</a>, 
        <a href="{% url component_delete project_slug=project.slug component_slug=comp.slug %}">{% trans "del" %}</a>)
      </sup>
      {% endif %}
      </p>
      <p class="description">{{ comp.description|truncatewords:"10" }}</p></li>
    </div>
    {% endfor %}
  </div>
  {% if components|slice:"4:" %}<p class="more">
  More components:  
  {% for comp in components|slice:"4:" %}
    <a href="{{ comp.get_absolute_url }}">{{ comp.name }}</a>{% if not forloop.last %},{% endif %}
  {% endfor %}
  </p>
  {% endif %}
  {% else %}
  <p>{% trans "No components are registered for this project yet." %}
    <a href="{% url component_create project_slug=project.slug %}">{% trans "Add one!" %}</a>
  </p>{% endif %}
  {% endwith %}
  <p class="i16 tip compact clear">
    {% blocktrans %}<em>Components</em> are smaller, self-contained parts of a larger project which consist of actual files.
    Examples of components of a software project could be "UI" and "Docs" or development branches like <code>HEAD</code>.{% endblocktrans %}</em>
  </p>
</div>
